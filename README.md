# Real Life Game - å€å¡ŠéˆéŠæˆ²å¹³å°

## é …ç›®æ¦‚è¿°

Real Life Game æ˜¯ä¸€å€‹åŸºæ–¼å€å¡Šéˆçš„éŠæˆ²å¹³å°ï¼Œæ•´åˆ ERC-20 ä»£å¹£çå‹µæ©Ÿåˆ¶ï¼Œè®“çµ„ç¹”è€…èƒ½å¤ å‰µå»ºå„ç¨®éŠæˆ²æ´»å‹•ï¼Œåƒèˆ‡è€…å¯ä»¥é€ééŠæˆ²ç²å¾—ä»£å¹£çå‹µã€‚å¹³å°æ”¯æ´å¤šç¨®éŠæˆ²é¡å‹ï¼Œå¾å•ç­”éŠæˆ²åˆ°å¯¦å¢ƒé—–é—œéŠæˆ²ã€‚

## æ ¸å¿ƒåŠŸèƒ½

### ğŸ® éŠæˆ²ç®¡ç†
- **éŠæˆ²å‰µå»º**ï¼šçµ„ç¹”è€…å¯ä»¥å‰µå»ºå¤šç¨®é¡å‹çš„éŠæˆ²
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**ï¼šæ¡ç”¨æ’ä»¶å¼æ¶æ§‹ï¼Œæ”¯æ´å¤šç¨®éŠæˆ²é¡å‹æ¥å…¥
- **é¦–ç™¼éŠæˆ²**ï¼šå•ç­”éŠæˆ²ï¼ˆQ&A Gameï¼‰
- **æœªä¾†æ“´å±•**ï¼šå¯¦å¢ƒé—–é—œéŠæˆ²ã€è§£è¬éŠæˆ²ç­‰

### ğŸ’° çå‹µæ©Ÿåˆ¶
- **æ™ºèƒ½åˆç´„ç®¡ç†**ï¼šçµ„ç¹”è€…å°‡çé‡‘å­˜å…¥æ™ºèƒ½åˆç´„
- **éˆæ´»åˆ†é…æ–¹å¼**ï¼š
  - æ’ååˆ¶ï¼šå‰ä¸‰åä¸åŒæ¯”ä¾‹åˆ†é…
  - ç©åˆ†åˆ¶ï¼šä¾ç…§åˆ†æ•¸æ¯”ä¾‹åˆ†é…
  - è‡ªå®šç¾©ï¼šçµ„ç¹”è€…è‡ªå®šç¾©åˆ†é…è¦å‰‡
- **è‡ªå‹•åˆ†ç™¼**ï¼šæ™ºèƒ½åˆç´„è‡ªå‹•åŸ·è¡Œçé‡‘åˆ†é…

### ğŸ’¡ æç¤ºç³»çµ±
- **åŠ ç¢¼æ©Ÿåˆ¶**ï¼šåƒèˆ‡è€…å¯é€éåŠ ç¢¼çé‡‘æ± ç²å¾—ç­”æ¡ˆæç¤º
- **æç¤ºç®¡ç†**ï¼šçµ„ç¹”è€…é è¨­æç¤ºå…§å®¹å’ŒåŠ ç¢¼è¦æ±‚
- **å‹•æ…‹å®šåƒ¹**ï¼šæ ¹æ“šçé‡‘æ± å¤§å°èª¿æ•´æç¤ºåƒ¹æ ¼

### ğŸ” ç”¨æˆ¶ç³»çµ±
- **éŒ¢åŒ…ç™»å…¥**ï¼šæ”¯æ´ä»¥å¤ªåŠç›¸å®¹éŒ¢åŒ…ç™»å…¥
- **èº«ä»½é©—è­‰**ï¼šåŸºæ–¼å€å¡Šéˆçš„å»ä¸­å¿ƒåŒ–èº«ä»½é©—è­‰
- **ç”¨æˆ¶è³‡æ–™**ï¼šéŠæˆ²æ­·å²ã€ç²çè¨˜éŒ„ã€ä»£å¹£é¤˜é¡

## æŠ€è¡“æ¶æ§‹

### å‰ç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**ï¼šNext.js 14 (App Router)
- **æ¨£å¼**ï¼šTailwind CSS
- **ç‹€æ…‹ç®¡ç†**ï¼šZustand
- **éŒ¢åŒ…æ•´åˆ**ï¼šWalletConnect, MetaMask
- **UI çµ„ä»¶**ï¼šRadix UI + shadcn/ui

### å¾Œç«¯æŠ€è¡“æ£§
- **æ•¸æ“šåº«**ï¼šSupabase (PostgreSQL)
- **èªè­‰**ï¼šSupabase Auth + éŒ¢åŒ…ç°½åé©—è­‰
- **API**ï¼šNext.js API Routes
- **æ–‡ä»¶å­˜å„²**ï¼šSupabase Storage

### å€å¡ŠéˆæŠ€è¡“
- **ç¶²çµ¡**ï¼šPolygon (MATIC)
- **æ™ºèƒ½åˆç´„**ï¼šSolidity
- **é–‹ç™¼æ¡†æ¶**ï¼šHardhat
- **éŒ¢åŒ…æ•´åˆ**ï¼šethers.js / viem
- **ä»£å¹£æ¨™æº–**ï¼šERC-20

## æ™ºèƒ½åˆç´„è¨­è¨ˆ

### GameFactory åˆç´„
```solidity
// éŠæˆ²å·¥å» åˆç´„ï¼Œç®¡ç†éŠæˆ²å‰µå»ºå’Œè¨»å†Š
contract GameFactory {
    mapping(uint256 => address) public games;
    mapping(address => bool) public authorizedGameTypes;
    
    function createGame(address gameType, bytes calldata initData) external;
    function registerGameType(address gameType) external;
}
```

### GameReward åˆç´„
```solidity
// çå‹µåˆ†é…åˆç´„
contract GameReward {
    struct RewardPool {
        address token;
        uint256 totalAmount;
        uint256 remainingAmount;
        RewardDistribution distribution;
    }
    
    enum RewardDistribution {
        RANKING,    // æ’ååˆ¶
        SCORE,      // ç©åˆ†åˆ¶
        CUSTOM      // è‡ªå®šç¾©
    }
    
    function depositReward(uint256 gameId, address token, uint256 amount) external;
    function distributeRewards(uint256 gameId, address[] calldata winners, uint256[] calldata amounts) external;
}
```

### QAGame åˆç´„
```solidity
// å•ç­”éŠæˆ²åˆç´„
contract QAGame {
    struct Question {
        string questionHash;  // IPFS hash
        bytes32 answerHash;   // ç­”æ¡ˆå“ˆå¸Œ
        uint256 hintPrice;    // æç¤ºåƒ¹æ ¼
        string hintHash;      // æç¤ºå…§å®¹å“ˆå¸Œ
    }
    
    function submitAnswer(uint256 questionId, string calldata answer) external;
    function buyHint(uint256 questionId) external payable;
    function endGame() external;
}
```

## æ•¸æ“šåº«è¨­è¨ˆ

### æ ¸å¿ƒè¡¨çµæ§‹

```sql
-- ç”¨æˆ¶è¡¨
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    wallet_address TEXT UNIQUE NOT NULL,
    username TEXT,
    avatar_url TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- éŠæˆ²è¡¨
CREATE TABLE games (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    contract_address TEXT UNIQUE NOT NULL,
    creator_id UUID REFERENCES users(id),
    game_type TEXT NOT NULL,
    title TEXT NOT NULL,
    description TEXT,
    status TEXT DEFAULT 'created',
    start_time TIMESTAMP WITH TIME ZONE,
    end_time TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- å•ç­”éŠæˆ²å•é¡Œè¡¨
CREATE TABLE qa_questions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    game_id UUID REFERENCES games(id),
    question_text TEXT NOT NULL,
    answer_hash TEXT NOT NULL,
    hint_text TEXT,
    hint_price DECIMAL,
    order_index INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- éŠæˆ²åƒèˆ‡è¨˜éŒ„
CREATE TABLE game_participations (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    game_id UUID REFERENCES games(id),
    user_id UUID REFERENCES users(id),
    score INTEGER DEFAULT 0,
    rank INTEGER,
    reward_amount DECIMAL,
    completed_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ç­”é¡Œè¨˜éŒ„
CREATE TABLE answer_submissions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    participation_id UUID REFERENCES game_participations(id),
    question_id UUID REFERENCES qa_questions(id),
    answer_text TEXT NOT NULL,
    is_correct BOOLEAN,
    submitted_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

## é …ç›®çµæ§‹

```
real-life-game/
â”œâ”€â”€ README.md
â”œâ”€â”€ package.json
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .env.local
â”œâ”€â”€ contracts/                 # æ™ºèƒ½åˆç´„
â”‚   â”œâ”€â”€ GameFactory.sol
â”‚   â”œâ”€â”€ GameReward.sol
â”‚   â”œâ”€â”€ QAGame.sol
â”‚   â””â”€â”€ deploy/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”œâ”€â”€ games/
â”‚   â”‚   â”œâ”€â”€ create/
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”œâ”€â”€ components/           # React çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/              # åŸºç¤ UI çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ game/            # éŠæˆ²ç›¸é—œçµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ wallet/          # éŒ¢åŒ…çµ„ä»¶
â”‚   â”‚   â””â”€â”€ layout/          # å¸ƒå±€çµ„ä»¶
â”‚   â”œâ”€â”€ lib/                 # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”‚   â”œâ”€â”€ contracts.ts
â”‚   â”‚   â”œâ”€â”€ wallet.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ hooks/               # React Hooks
â”‚   â”œâ”€â”€ store/               # ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ types/               # TypeScript é¡å‹
â”œâ”€â”€ supabase/                # Supabase é…ç½®
â”‚   â”œâ”€â”€ migrations/
â”‚   â””â”€â”€ seed.sql
â””â”€â”€ hardhat.config.js        # Hardhat é…ç½®
```

## é–‹ç™¼è·¯ç·šåœ–

### Phase 1: åŸºç¤æ¶æ§‹ (4é€±)
- [x] é …ç›®åˆå§‹åŒ–å’ŒæŠ€è¡“æ£§æ­å»º
- [ ] æ™ºèƒ½åˆç´„é–‹ç™¼å’Œæ¸¬è©¦
- [ ] æ•¸æ“šåº«è¨­è¨ˆå’Œ Supabase é…ç½®
- [ ] éŒ¢åŒ…é€£æ¥å’Œç”¨æˆ¶èªè­‰
- [ ] åŸºç¤ UI çµ„ä»¶é–‹ç™¼

### Phase 2: å•ç­”éŠæˆ² (6é€±)
- [ ] å•ç­”éŠæˆ²æ™ºèƒ½åˆç´„
- [ ] éŠæˆ²å‰µå»ºå’Œç®¡ç†ç•Œé¢
- [ ] å•ç­”éŠæˆ²åƒèˆ‡ç•Œé¢
- [ ] æç¤ºç³»çµ±å¯¦ç¾
- [ ] çå‹µåˆ†é…æ©Ÿåˆ¶

### Phase 3: å„ªåŒ–å’Œæ“´å±• (4é€±)
- [ ] æ€§èƒ½å„ªåŒ–å’Œå®‰å…¨å¯©è¨ˆ
- [ ] ç§»å‹•ç«¯é©é…
- [ ] éŠæˆ²æ•¸æ“šåˆ†æ
- [ ] ç¤¾äº¤åŠŸèƒ½ï¼ˆæ’è¡Œæ¦œã€åˆ†äº«ï¼‰

### Phase 4: å¯¦å¢ƒéŠæˆ² (8é€±)
- [ ] å¯¦å¢ƒéŠæˆ²æ¡†æ¶è¨­è¨ˆ
- [ ] GPS å®šä½å’Œ AR æ•´åˆ
- [ ] é—–é—œç³»çµ±é–‹ç™¼
- [ ] å¤šäººå”ä½œæ©Ÿåˆ¶

## å®‰å…¨è€ƒé‡

### æ™ºèƒ½åˆç´„å®‰å…¨
- **é‡å…¥æ”»æ“Šé˜²è­·**ï¼šä½¿ç”¨ ReentrancyGuard
- **æ¬Šé™æ§åˆ¶**ï¼šåŸºæ–¼è§’è‰²çš„è¨ªå•æ§åˆ¶
- **ä»£ç¢¼å¯©è¨ˆ**ï¼šç¬¬ä¸‰æ–¹å®‰å…¨å¯©è¨ˆ
- **å‡ç´šæ©Ÿåˆ¶**ï¼šä»£ç†åˆç´„æ¨¡å¼

### å‰ç«¯å®‰å…¨
- **è¼¸å…¥é©—è­‰**ï¼šæ‰€æœ‰ç”¨æˆ¶è¼¸å…¥åš´æ ¼é©—è­‰
- **XSS é˜²è­·**ï¼šå…§å®¹å®‰å…¨ç­–ç•¥ (CSP)
- **ç§é‘°å®‰å…¨**ï¼šæ°¸ä¸æ¥è§¸ç”¨æˆ¶ç§é‘°
- **HTTPS**ï¼šå…¨ç«™ HTTPS åŠ å¯†

### æ•¸æ“šå®‰å…¨
- **æ•æ„Ÿæ•¸æ“šåŠ å¯†**ï¼šç­”æ¡ˆå’Œæç¤ºåŠ å¯†å­˜å„²
- **è¨ªå•æ§åˆ¶**ï¼šåŸºæ–¼ RLS çš„æ•¸æ“šè¨ªå•æ§åˆ¶
- **å‚™ä»½ç­–ç•¥**ï¼šå®šæœŸæ•¸æ“šå‚™ä»½
- **éš±ç§ä¿è­·**ï¼šç¬¦åˆ GDPR è¦æ±‚

## éƒ¨ç½²å’Œé‹ç¶­

### é–‹ç™¼ç’°å¢ƒ
```bash
# å®‰è£ä¾è³´
npm install

# å•Ÿå‹•é–‹ç™¼æœå‹™å™¨
npm run dev

# ç·¨è­¯æ™ºèƒ½åˆç´„
npx hardhat compile

# é‹è¡Œæ¸¬è©¦
npm run test
```

### ç”Ÿç”¢ç’°å¢ƒ
- **å‰ç«¯éƒ¨ç½²**ï¼šVercel
- **æ•¸æ“šåº«**ï¼šSupabase Cloud
- **æ™ºèƒ½åˆç´„**ï¼šPolygon Mainnet
- **ç›£æ§**ï¼šSentry + Datadog
- **CDN**ï¼šCloudflare

## è²¢ç»æŒ‡å—

1. Fork é …ç›®
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

## è¨±å¯è­‰

æœ¬é …ç›®æ¡ç”¨ MIT è¨±å¯è­‰ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è©³æƒ…ã€‚

## è¯ç¹«æ–¹å¼

- é …ç›®ç¶­è­·è€…ï¼š[Your Name]
- é›»å­éƒµä»¶ï¼š[your.email@example.com]
- é …ç›®éˆæ¥ï¼š[https://github.com/yourusername/real-life-game](https://github.com/yourusername/real-life-game)

---

**æ³¨æ„**ï¼šæœ¬é …ç›®ä»åœ¨é–‹ç™¼ä¸­ï¼ŒåŠŸèƒ½å’Œ API å¯èƒ½æœƒç™¼ç”Ÿè®ŠåŒ–ã€‚è«‹é—œæ³¨é …ç›®æ›´æ–°å’Œç™¼å¸ƒèªªæ˜ã€‚